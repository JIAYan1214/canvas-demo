<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DrawLine</title>
</head>
<body style="height: 100%;padding: 0;margin: 0;">
<canvas id="canvas" style="width: 100%;height: 100%;">
    当前浏览器不支持Canvas，请更换浏览器后再试
</canvas>

<script>
var width = 1024,height= 768;
var scale = 0.5;
    window.onload = function(){

        var canvas = document.getElementById("canvas");

        width = document.body.clientWidth;
        height = document.body.clientHeight;

        canvas.width = width;
        canvas.height = height;

        var context = canvas.getContext('2d');

        //径向渐变
        //var linearG= context.createRadialGradient(width/2,height,0,width/2,height,height);
        //线性渐变
        var linearG= context.createLinearGradient(0,0,0,height);
        linearG.addColorStop(0,'black');
        linearG.addColorStop(1,'#035');

        //绘制矩形
        context.fillStyle =linearG;
        context.fillRect(0,0,canvas.width,canvas.height);

        let Radius = 20;

        for(let i = 0;i< 200 ;i++){
            let Radius = Math.random()*10+10;//10-20 之间的随机数
            var x = Math.random()*canvas.width;
            var y = Math.random()*canvas.height*0.65;//屏幕的65%绘制星星
            var rotate = Math.random()*360;
            //存在的问题；星星溢出屏幕的，星星叠加
            drawStart(context,Radius,x,y,rotate);
        }
        fillMoon(context,2,width*3/4,200,100,20);
        drawLand(context,width,height);
    }

    function drawLand(ctx) {
        ctx.save();

        ctx.beginPath();
        ctx.moveTo(0,height*4/5);

        ctx.bezierCurveTo(width*3/8,height*3/5,width*1/2,height*6/7,width,height*4/5);
        ctx.lineTo(width,height);
        ctx.lineTo(0,height);
        ctx.closePath();

        let landStyle = ctx.createLinearGradient(0,800,0,0);
        landStyle.addColorStop(0,'#030');
        landStyle.addColorStop(1,'#580');
        ctx.fillStyle = landStyle;
        ctx.fill();
        ctx.restore();
    }

//第二次
function fillMoon(ctx,d,x,y,R,rotate,/*option*/fillColor) {
    ctx.save();

    ctx.translate(x,y);
    ctx.rotate(rotate*Math.PI/180);//弧度=radians=(Math.PI/180)*旋转角度
    ctx.scale(R,R);

    pathMoon(ctx,d);

    ctx.fillStyle = fillColor || '#fb5';
    ctx.fill();

    ctx.restore();
}
function pathMoon(ctx,d) {
    ctx.beginPath();
    ctx.arc(0,0,1,Math.PI/2,Math.PI*3/2,true);
    ctx.moveTo(0,-1);
    ctx.arcTo(d,0,0,1,dis(0,-1,d,0)/d);
    ctx.closePath();
}

//第一步固定坐标画月亮
function dis(x1,y1,x2,y2) {
    return Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));
}

    //save（），restore（）状态保存与恢复
let i =0;
    function drawStart(context,Radius,x,y,rotate) {

        context.save();
        let R = Radius;
        let r = scale*Radius;
        //绘制在x,y，大小为R,旋转角度的五角星
        context.translate(x,y);
        context.rotate(rotate/180*Math.PI);//旋转  参数是角度，意弧度为单位 radians=(Math.PI/180)*旋转角度

        context.scale(R,R);
        startPath(context,R,r);//绘制标准的五角星



       /* context.lineWidth = 1;
        context.lineJoin = 'round';*///scale同时会把外边框放大，所以放弃对外边框的编辑
        context.fillStyle = '#fb3';
       // context.strokeStyle = '#fd5';

        //context.stroke();
        context.fill();

        context.restore();

    }
//绘制标准的五角星
    function startPath(ctx) {
        ctx.beginPath();
        for(let i =0;i<5;i++){
            ctx.lineTo(Math.cos((18+i*72)/180*Math.PI),-Math.sin((18+i*72)/180*Math.PI));
            ctx.lineTo(Math.cos((54+i*72 )/180*Math.PI)*0.5,-Math.sin((54+i*72)/180*Math.PI)*0.5);
        }
        ctx.closePath();



    }




</script>
</body>
</html>